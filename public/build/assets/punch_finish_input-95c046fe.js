document.getElementById("working_time_input_modal");const p=document.getElementById("input_customer_id"),f=document.getElementById("input_customer_name"),w=document.getElementById("input_working_time"),k=document.getElementById("input_working_time_info"),c=document.getElementById("input_time_left");document.getElementById("input_time_left_modal");const v=document.getElementById("rest_time"),o=document.getElementById("org_rest_time"),b=document.getElementById("working_time"),h=document.getElementById("org_working_time");document.getElementById("punch_confirm_modal");document.getElementById("punch_enter_form");$(".working_time_input_modal_open").on("click",function(){if($(this).val()==="ueni-pia-kyohai"){try{const e=Number($("#input_time_left").html());if(e==0)return;if($("#working_time_input_260122-004").length||$("#working_time_input_260122-005").length)throw new Error("「ウエニ貿易」か「PIA(ドンキ)」が既に存在しています。");const t=(new Date().getMonth()+1)%2===0,_=e/2;let m=0,l=0;t?(l=Math.floor(_/.25)*.25,m=e-l):(m=Math.floor(_/.25)*.25,l=e-m),d("PIA(ドンキ)","260122-005",l.toFixed(2)),d("ウエニ貿易","260122-004",m.toFixed(2)),$("#input_time_left").html(0)}catch(e){alert(e.message)}return}$("#working_time_input_modal").removeClass("hidden"),$("#input_customer_id").val($(this).val()),$("#input_customer_name").html($(this).html()),$("#input_working_time").html("0.00"),$("#input_time_left_modal").html(Number($("#input_time_left").html()).toFixed(2))});$(".working_time_input_modal_close").on("click",function(){$("#working_time_input_modal").addClass("hidden")});$(".input_time").on("click",function(){$("#input_working_time").html((Number($(this).html())+Number($("#input_working_time").html())).toFixed(2))});$("#input_working_time_clear").on("click",function(){$("#input_working_time").html("0.00")});$("[id=all_input]").on("click",function(){$("#input_working_time").html($("#input_time_left_modal").html())});$("#working_time_input_enter").on("click",function(){try{if($("#working_time_input_"+$("#input_customer_id").val()).length!==0)throw new Error("既に存在する荷主です。");if(Number($("#input_working_time").html())==0)throw new Error("時間が入力されていません。");if(Number($("#input_time_left").html())<Number($("#input_working_time").html()))throw new Error("入力時間が稼働時間を超えています。");d(f.innerHTML,p.value,w.innerHTML),$("#input_time_left").html((Number($("#input_time_left").html())-Number($("#input_working_time").html())).toFixed(2)),$("#working_time_input_modal").addClass("hidden")}catch(e){alert(e.message)}});function d(e,n,i){const t=document.createElement("button");t.id="working_time_input_"+n,t.classList.add("working_time_info_delete","col-span-4","py-5","text-center","bg-blue-200","text-xl","rounded-lg","cursor-pointer","working_time_input_"+n),t.innerHTML=e+"<br>"+i;const _=document.createElement("input");_.type="hidden",_.id="working_time_input_"+n+"_hidden",_.classList.add("working_time_input","working_time_input_"+n),_.value=i,_.name="working_time_input["+n+"]",k.append(t,_)}$(document).on("click",".working_time_info_delete",function(){const e=document.getElementById(this.id),n=document.getElementById(this.id+"_hidden");$("#input_time_left").html((Number($("#input_time_left").html())+Number(n.value)).toFixed(2)),e.remove(),n.remove()});$(".add_rest_time_select").on("click",function(){u()});window.onload=function(){u()};function u(){var e=document.getElementsByName("add_rest_time"),n=document.getElementById("add_rest_time_disp"),i=0,t=0,_=0;t=o.value;for(var m=0;m<e.length;m++){const s=document.getElementById(e[m].id+"_label");if(e[m].checked){s.classList.add("bg-blue-200");var l=document.getElementById(e[m].id);_=l.value}e[m].checked||s.classList.remove("bg-blue-200")}v.value=Number(o.value),n&&(n.value=Number(_)),b.value=((Number(h.value)+Number(i)-Number(_)-Number(t))/60).toFixed(2),c.innerHTML=((Number(h.value)+Number(i)-Number(_)-Number(t))/60).toFixed(2);let a=document.getElementsByClassName("working_time_input");for(var r=0;r<a.length;r++)c.innerHTML=(Number(c.innerHTML)-Number(a[r].value)).toFixed(2)}$("#punch_finish_enter").on("click",function(){console.log($('[name="no_rest_time"]:checked').length);try{if(Number($("#input_time_left").html())>0)throw new Error("入力されていない稼働時間があります。");if(Number($("#input_time_left").html())<0)throw new Error(`荷主稼働時間がマイナスになっています。
時間を調整して下さい。`);if($('[name="no_rest_time"]').length>0&&$('[name="no_rest_time"]:checked').length==0)throw new Error("休憩未取得時間が選択されていません。");if($('[name="rest_time_select"]').length>0&&$('[name="rest_time_select"]:checked').length==0)throw new Error("休憩取得時間が選択されていません。");if($('[name="add_rest_time"]').length>0&&$('[name="add_rest_time"]:checked').length==0)throw new Error("追加休憩取得時間が選択されていません。");$("#punch_confirm_modal").removeClass("hidden"),$("#punch_target_employee_name").html($("#employee_name").html())}catch(e){return alert(e.message),!1}});$("#punch_confirm_cancel").on("click",function(){$("#punch_confirm_modal").addClass("hidden")});$("#punch_confirm_enter").on("click",function(){$("#punch_enter_form").submit()});$("#rest_time_check_yes").on("click",function(){$("#org_working_time").val(),$("#rest_time_div").append(`
        <input type="radio" name="rest_time_select" id="${o.value}" value="${o.value}" class="rest_time_select hidden" checked>
        <label for="${o.value}" class="cursor-pointer flex flex-col w-full max-w-lg mx-auto text-center border-2 rounded-lg border-gray-900 p-2 text-2xl bg-blue-200">${(o.value/60).toFixed(2)}時間</label>
    `),$("#rest_time_check_modal").addClass("hidden")});$("#rest_time_check_no").on("click",function(){$("#rest_time_check_modal").addClass("hidden"),$("#rest_time_change_modal").removeClass("hidden"),g()});$(".rest_time_select").on("click",function(){g()});function g(){$("#law_violated_warning").addClass("hidden");let e=document.getElementsByName("rest_time_select");for(var n=0;n<e.length;n++){const t=document.getElementById(e[n].id+"_label");if(e[n].checked){t.classList.add("bg-blue-200");var i=document.getElementById(e[n].id);$("#law_rest_time").val()>i.value&&$("#law_violated_warning").removeClass("hidden")}e[n].checked||t.classList.remove("bg-blue-200")}}$("#rest_time_change_yes").on("click",function(){try{if($('[name="rest_time_select"]').length>0&&$('[name="rest_time_select"]:checked').length==0)throw new Error("休憩取得時間が選択されていません。");let i=document.getElementsByName("rest_time_select"),t=0;for(var e=0;e<i.length;e++){const _=document.getElementById(i[e].id+"_label");if(i[e].checked){var n=document.getElementById(i[e].id);t=n.value}}$("#rest_time_div").append(`
            <input type="radio" name="rest_time_select" id="${t}" value="${t}" class="rest_time_select hidden" checked>
            <label for="${t}" class="cursor-pointer flex flex-col w-full max-w-lg mx-auto text-center border-2 rounded-lg border-gray-900 p-2 text-2xl bg-blue-200">${(t/60).toFixed(2)}時間</label>
        `),$("#org_rest_time").val()>t&&$("#is_chief_approvaled").val(1),$("#org_rest_time").val(t),u(),$("#law_rest_time").val()>t&&$("#is_law_violated").val(1),$("#rest_time_change_modal").addClass("hidden")}catch(i){return alert(i.message),!1}});$("#rest_time_change_no").on("click",function(){window.history.back()});
