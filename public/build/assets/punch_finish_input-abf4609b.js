document.getElementById("working_time_input_modal");const r=document.getElementById("input_customer_id"),f=document.getElementById("input_customer_name"),s=document.getElementById("input_working_time"),k=document.getElementById("input_working_time_info"),c=document.getElementById("input_time_left");document.getElementById("input_time_left_modal");const w=document.getElementById("rest_time"),m=document.getElementById("org_rest_time"),v=document.getElementById("working_time"),g=document.getElementById("org_working_time");document.getElementById("punch_confirm_modal");document.getElementById("punch_enter_form");$(".working_time_input_modal_open").on("click",function(){$("#working_time_input_modal").removeClass("hidden"),$("#input_customer_id").val($(this).val()),$("#input_customer_name").html($(this).html()),$("#input_working_time").html("0.00"),$("#input_time_left_modal").html(Number($("#input_time_left").html()).toFixed(2))});$(".working_time_input_modal_close").on("click",function(){$("#working_time_input_modal").addClass("hidden")});$(".input_time").on("click",function(){$("#input_working_time").html((Number($(this).html())+Number($("#input_working_time").html())).toFixed(2))});$("#input_working_time_clear").on("click",function(){$("#input_working_time").html("0.00")});$("[id=all_input]").on("click",function(){$("#input_working_time").html($("#input_time_left_modal").html())});$("#working_time_input_enter").on("click",function(){try{if($("#working_time_input_"+$("#input_customer_id").val()).length!==0)throw new Error("既に存在する荷主です。");if(Number($("#input_working_time").html())==0)throw new Error("時間が入力されていません。");if(Number($("#input_time_left").html())<Number($("#input_working_time").html()))throw new Error("入力時間が稼働時間を超えています。");const e=document.createElement("button");e.id="working_time_input_"+r.value,e.classList.add("working_time_info_delete","col-span-4","py-5","text-center","bg-blue-200","text-xl","rounded-lg","cursor-pointer","working_time_input_"+r.value),e.innerHTML=f.innerHTML+"<br>"+s.innerHTML;const t=document.createElement("input");t.type="hidden",t.id="working_time_input_"+r.value+"_hidden",t.classList.add("working_time_input","working_time_input_"+r.value),t.value=s.innerHTML,t.name="working_time_input["+r.value+"]",k.append(e,t),$("#input_time_left").html((Number($("#input_time_left").html())-Number($("#input_working_time").html())).toFixed(2)),$("#working_time_input_modal").addClass("hidden")}catch(e){alert(e.message)}});$(document).on("click",".working_time_info_delete",function(){const e=document.getElementById(this.id),t=document.getElementById(this.id+"_hidden");$("#input_time_left").html((Number($("#input_time_left").html())+Number(t.value)).toFixed(2)),e.remove(),t.remove()});$(".add_rest_time_select").on("click",function(){d()});window.onload=function(){d()};function d(){var e=document.getElementsByName("add_rest_time"),t=document.getElementById("add_rest_time_disp"),i=0,n=0,l=0;n=m.value;for(var _=0;_<e.length;_++){const a=document.getElementById(e[_].id+"_label");if(e[_].checked){a.classList.add("bg-blue-200");var p=document.getElementById(e[_].id);l=p.value}e[_].checked||a.classList.remove("bg-blue-200")}w.value=Number(m.value),t&&(t.value=Number(l)),v.value=((Number(g.value)+Number(i)-Number(l)-Number(n))/60).toFixed(2),c.innerHTML=((Number(g.value)+Number(i)-Number(l)-Number(n))/60).toFixed(2);let u=document.getElementsByClassName("working_time_input");for(var o=0;o<u.length;o++)c.innerHTML=(Number(c.innerHTML)-Number(u[o].value)).toFixed(2)}$("#punch_finish_enter").on("click",function(){console.log($('[name="no_rest_time"]:checked').length);try{if(Number($("#input_time_left").html())>0)throw new Error("入力されていない稼働時間があります。");if(Number($("#input_time_left").html())<0)throw new Error(`荷主稼働時間がマイナスになっています。
時間を調整して下さい。`);if($('[name="no_rest_time"]').length>0&&$('[name="no_rest_time"]:checked').length==0)throw new Error("休憩未取得時間が選択されていません。");if($('[name="rest_time_select"]').length>0&&$('[name="rest_time_select"]:checked').length==0)throw new Error("休憩取得時間が選択されていません。");if($('[name="add_rest_time"]').length>0&&$('[name="add_rest_time"]:checked').length==0)throw new Error("追加休憩取得時間が選択されていません。");$("#punch_confirm_modal").removeClass("hidden"),$("#punch_target_employee_name").html($("#employee_name").html())}catch(e){return alert(e.message),!1}});$("#punch_confirm_cancel").on("click",function(){$("#punch_confirm_modal").addClass("hidden")});$("#punch_confirm_enter").on("click",function(){$("#punch_enter_form").submit()});$("#rest_time_check_yes").on("click",function(){$("#org_working_time").val(),$("#rest_time_div").append(`
        <input type="radio" name="rest_time_select" id="${m.value}" value="${m.value}" class="rest_time_select hidden" checked>
        <label for="${m.value}" class="cursor-pointer flex flex-col w-full max-w-lg mx-auto text-center border-2 rounded-lg border-gray-900 p-2 text-2xl bg-blue-200">${(m.value/60).toFixed(2)}時間</label>
    `),$("#rest_time_check_modal").addClass("hidden")});$("#rest_time_check_no").on("click",function(){$("#rest_time_check_modal").addClass("hidden"),$("#rest_time_change_modal").removeClass("hidden"),h()});$(".rest_time_select").on("click",function(){h()});function h(){let e=document.getElementsByName("rest_time_select");for(var t=0;t<e.length;t++){const n=document.getElementById(e[t].id+"_label");if(e[t].checked){n.classList.add("bg-blue-200");var i=document.getElementById(e[t].id);i.value}e[t].checked||n.classList.remove("bg-blue-200")}}$("#rest_time_change_yes").on("click",function(){try{if($('[name="rest_time_select"]').length>0&&$('[name="rest_time_select"]:checked').length==0)throw new Error("休憩取得時間が選択されていません。");let i=document.getElementsByName("rest_time_select"),n=0;for(var e=0;e<i.length;e++){const l=document.getElementById(i[e].id+"_label");if(i[e].checked){var t=document.getElementById(i[e].id);n=t.value}}$("#rest_time_div").append(`
            <input type="radio" name="rest_time_select" id="${n}" value="${n}" class="rest_time_select hidden" checked>
            <label for="${n}" class="cursor-pointer flex flex-col w-full max-w-lg mx-auto text-center border-2 rounded-lg border-gray-900 p-2 text-2xl bg-blue-200">${(n/60).toFixed(2)}時間</label>
        `),$("#org_rest_time").val()>n&&$("#is_chief_approvaled").val(1),$("#org_rest_time").val(n),d(),$("#law_rest_time").val()>n&&$("#is_law_violated").val(1),$("#rest_time_change_modal").addClass("hidden")}catch(i){return alert(i.message),!1}});$("#rest_time_change_no").on("click",function(){window.history.back()});
