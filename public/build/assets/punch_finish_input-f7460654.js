document.getElementById("working_time_input_modal");const o=document.getElementById("input_customer_id"),E=document.getElementById("input_customer_name"),p=document.getElementById("input_working_time"),y=document.getElementById("input_working_time_info"),c=document.getElementById("input_time_left");document.getElementById("input_time_left_modal");const N=document.getElementById("rest_time"),s=document.getElementById("org_rest_time"),B=document.getElementById("working_time"),f=document.getElementById("org_working_time");document.getElementById("punch_confirm_modal");document.getElementById("punch_enter_form");$(".working_time_input_modal_open").on("click",function(){$("#working_time_input_modal").removeClass("hidden"),$("#input_customer_id").val($(this).val()),$("#input_customer_name").html($(this).html()),$("#input_working_time").html("0.00"),$("#input_time_left_modal").html(Number($("#input_time_left").html()).toFixed(2))});$(".working_time_input_modal_close").on("click",function(){$("#working_time_input_modal").addClass("hidden")});$(".input_time").on("click",function(){$("#input_working_time").html((Number($(this).html())+Number($("#input_working_time").html())).toFixed(2))});$("#input_working_time_clear").on("click",function(){$("#input_working_time").html("0.00")});$("[id=all_input]").on("click",function(){$("#input_working_time").html($("#input_time_left_modal").html())});$("#working_time_input_enter").on("click",function(){try{if($("#working_time_input_"+$("#input_customer_id").val()).length!==0)throw new Error("既に存在する荷主です。");if(Number($("#input_working_time").html())==0)throw new Error("時間が入力されていません。");if(Number($("#input_time_left").html())<Number($("#input_working_time").html()))throw new Error("入力時間が稼働時間を超えています。");const t=document.createElement("button");t.id="working_time_input_"+o.value,t.classList.add("working_time_info_delete","col-span-4","py-5","text-center","bg-blue-200","text-xl","rounded-lg","cursor-pointer","working_time_input_"+o.value),t.innerHTML=E.innerHTML+"<br>"+p.innerHTML;const n=document.createElement("input");n.type="hidden",n.id="working_time_input_"+o.value+"_hidden",n.classList.add("working_time_input","working_time_input_"+o.value),n.value=p.innerHTML,n.name="working_time_input["+o.value+"]",y.append(t,n),$("#input_time_left").html((Number($("#input_time_left").html())-Number($("#input_working_time").html())).toFixed(2)),$("#working_time_input_modal").addClass("hidden")}catch(t){alert(t.message)}});$(document).on("click",".working_time_info_delete",function(){const t=document.getElementById(this.id),n=document.getElementById(this.id+"_hidden");$("#input_time_left").html((Number($("#input_time_left").html())+Number(n.value)).toFixed(2)),t.remove(),n.remove()});$(".no_rest_time_select").on("click",function(){u()});$(".rest_time_select").on("click",function(){u()});$(".add_rest_time_select").on("click",function(){u()});window.onload=function(){u()};function u(){for(var t=document.getElementsByName("no_rest_time"),n=document.getElementsByName("rest_time_select"),i=document.getElementsByName("add_rest_time"),k=document.getElementById("rest_related_select_mode"),a=document.getElementById("add_rest_time_disp"),r=0,m=0,l=0,e=0;e<t.length;e++){const h=document.getElementById(t[e].id+"_label");if(t[e].checked){h.classList.add("bg-blue-200");var w=document.getElementById(t[e].id);r=w.value}t[e].checked||h.classList.remove("bg-blue-200")}for(var e=0;e<n.length;e++){const _=document.getElementById(n[e].id+"_label");if(n[e].checked){_.classList.add("bg-blue-200");var v=document.getElementById(n[e].id);m=v.value}n[e].checked||_.classList.remove("bg-blue-200")}k.value=="no_rest"&&(m=s.value);for(var e=0;e<i.length;e++){const _=document.getElementById(i[e].id+"_label");if(i[e].checked){_.classList.add("bg-blue-200");var b=document.getElementById(i[e].id);l=b.value}i[e].checked||_.classList.remove("bg-blue-200")}N.value=Number(s.value)-Number(r)-(Number(s.value)-Number(m)),a&&(a.value=Number(l)),B.value=((Number(f.value)+Number(r)-Number(l)-Number(m))/60).toFixed(2),c.innerHTML=((Number(f.value)+Number(r)-Number(l)-Number(m))/60).toFixed(2);let g=document.getElementsByClassName("working_time_input");for(var d=0;d<g.length;d++)c.innerHTML=(Number(c.innerHTML)-Number(g[d].value)).toFixed(2)}$("#punch_finish_enter").on("click",function(){console.log($('[name="no_rest_time"]:checked').length);try{if(Number($("#input_time_left").html())>0)throw new Error("入力されていない稼働時間があります。");if(Number($("#input_time_left").html())<0)throw new Error(`荷主稼働時間がマイナスになっています。
時間を調整して下さい。`);if($('[name="no_rest_time"]').length>0&&$('[name="no_rest_time"]:checked').length==0)throw new Error("休憩未取得時間が選択されていません。");if($('[name="rest_time_select"]').length>0&&$('[name="rest_time_select"]:checked').length==0)throw new Error("休憩取得時間が選択されていません。");if($('[name="add_rest_time"]').length>0&&$('[name="add_rest_time"]:checked').length==0)throw new Error("追加休憩取得時間が選択されていません。");$("#punch_confirm_modal").removeClass("hidden"),$("#punch_target_employee_name").html($("#employee_name").html())}catch(t){return alert(t.message),!1}});$("#punch_confirm_cancel").on("click",function(){$("#punch_confirm_modal").addClass("hidden")});$("#punch_confirm_enter").on("click",function(){$("#punch_enter_form").submit()});
