document.getElementById("working_time_input_modal");const i=document.getElementById("input_customer_id"),h=document.getElementById("input_customer_name"),a=document.getElementById("input_working_time"),p=document.getElementById("input_working_time_info"),r=document.getElementById("input_time_left");document.getElementById("input_time_left_modal");const f=document.getElementById("rest_time"),k=document.getElementById("org_rest_time"),w=document.getElementById("working_time"),s=document.getElementById("org_working_time");document.getElementById("punch_confirm_modal");document.getElementById("punch_enter_form");$(".working_time_input_modal_open").on("click",function(){$("#working_time_input_modal").removeClass("hidden"),$("#input_customer_id").val($(this).val()),$("#input_customer_name").html($(this).html()),$("#input_working_time").html("0.00"),$("#input_time_left_modal").html(Number($("#input_time_left").html()).toFixed(2))});$(".working_time_input_modal_close").on("click",function(){$("#working_time_input_modal").addClass("hidden")});$(".input_time").on("click",function(){$("#input_working_time").html((Number($(this).html())+Number($("#input_working_time").html())).toFixed(2))});$("#input_working_time_clear").on("click",function(){$("#input_working_time").html("0.00")});$("[id=all_input]").on("click",function(){$("#input_working_time").html($("#input_time_left_modal").html())});$("#working_time_input_enter").on("click",function(){try{if($("#working_time_input_"+$("#input_customer_id").val()).length!==0)throw new Error("既に存在する荷主です。");if(Number($("#input_working_time").html())==0)throw new Error("時間が入力されていません。");if(Number($("#input_time_left").html())<Number($("#input_working_time").html()))throw new Error("入力時間が稼働時間を超えています。");const e=document.createElement("button");e.id="working_time_input_"+i.value,e.classList.add("working_time_info_delete","col-span-4","py-5","text-center","bg-blue-200","text-xl","rounded-lg","cursor-pointer","working_time_input_"+i.value),e.innerHTML=h.innerHTML+"<br>"+a.innerHTML;const t=document.createElement("input");t.type="hidden",t.id="working_time_input_"+i.value+"_hidden",t.classList.add("working_time_input","working_time_input_"+i.value),t.value=a.innerHTML,t.name="working_time_input["+i.value+"]",p.append(e,t),$("#input_time_left").html((Number($("#input_time_left").html())-Number($("#input_working_time").html())).toFixed(2)),$("#working_time_input_modal").addClass("hidden")}catch(e){alert(e.message)}});$(document).on("click",".working_time_info_delete",function(){const e=document.getElementById(this.id),t=document.getElementById(this.id+"_hidden");$("#input_time_left").html((Number($("#input_time_left").html())+Number(t.value)).toFixed(2)),e.remove(),t.remove()});$(".no_rest_time_select").on("click",function(){l()});$(".add_rest_time_select").on("click",function(){l()});window.onload=function(){l()};function l(){for(var e=document.getElementsByName("no_rest_time"),t=document.getElementsByName("add_rest_time"),n=0;n<e.length;n++){const d=document.getElementById(e[n].id+"_label");if(e[n].checked){d.classList.add("bg-blue-200");var _=document.getElementById(e[n].id)}e[n].checked||d.classList.remove("bg-blue-200")}for(var m=0,n=0;n<t.length;n++){const c=document.getElementById(t[n].id+"_label");if(t[n].checked){c.classList.add("bg-blue-200");var g=document.getElementById(t[n].id);m=g.value}t[n].checked||c.classList.remove("bg-blue-200")}f.value=Number(k.value)-Number(_.value)+Number(m),w.value=((Number(s.value)+Number(_.value)-Number(m))/60).toFixed(2),r.innerHTML=((Number(s.value)+Number(_.value)-Number(m))/60).toFixed(2);let u=document.getElementsByClassName("working_time_input");for(var o=0;o<u.length;o++)r.innerHTML=(Number(r.innerHTML)-Number(u[o].value)).toFixed(2)}$("#punch_finish_enter").on("click",function(){console.log($('[name="no_rest_time"]:checked').length);try{if(Number($("#input_time_left").html())>0)throw new Error("入力されていない稼働時間があります。");if(Number($("#input_time_left").html())<0)throw new Error(`荷主稼働時間がマイナスになっています。
時間を調整して下さい。`);if($('[name="no_rest_time"]:checked').length==0)throw new Error("休憩未取得時間が選択されていません。");if($('[name="add_rest_time"]').length>0&&$('[name="add_rest_time"]:checked').length==0)throw new Error("追加休憩取得時間が選択されていません。");$("#punch_confirm_modal").removeClass("hidden"),$("#punch_target_employee_name").html($("#employee_name").html())}catch(e){return alert(e.message),!1}});$("#punch_confirm_cancel").on("click",function(){$("#punch_confirm_modal").addClass("hidden")});$("#punch_confirm_enter").on("click",function(){$("#punch_enter_form").submit()});
